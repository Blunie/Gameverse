<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <title>Red Dead Redemption 2 - GameVerse</title>
    <link rel="stylesheet" href="../styles.css" />
</head>

<body>
    <script src="../header.js"></script>

    <main class="game-detail">
        <img src="https://cdn.cloudflare.steamstatic.com/steam/apps/1174180/header.jpg" alt="Red Dead Redemption 2" />
        <section>
            <h2>Western Ã©pico con mundo abierto y narrativa profunda</h2>
            <p><strong>Precio:</strong> $159,000 COP</p>
            <p><strong>GÃ©nero:</strong> AcciÃ³n / Aventura</p>
            <p>Vive la historia de Arthur Morgan y la banda de Van der Linde en un mundo abierto lleno de detalles,
                decisiones morales y paisajes impresionantes. Caza, cabalga, explora y sobrevive en el viejo oeste.</p>
            <button onclick="addToCart('Red Dead Redemption 2', 159000, 'accion')">Agregar al carrito</button>
        </section>
    </main>

    <section class="reviews">
        <h3>â­ ReseÃ±as de jugadores</h3>
        <div id="reviews"></div>
    </section>

    <aside id="cart">
        <h2>ğŸ›’ Carrito</h2>
        <ul id="cart-items"></ul>
        <p id="total"><strong>Total:</strong> $0 COP</p>
        <a href="../carrito.html" class="ver-carrito">Ver resumen completo</a>
    </aside>

    <footer>
        <p>&copy; 2025 GameVerse</p>
    </footer>
    <script src="../script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const game = 'Red Dead Redemption 2';
            const reviewsContainer = document.getElementById('reviews');
            const reviews = JSON.parse(localStorage.getItem(`reviews-${game}`)) || [
                { user: 'Lina', comment: 'La historia me atrapÃ³ desde el inicio. Visualmente es una obra de arte.', rating: 5 },
                { user: 'JuanCowboy', comment: 'Explorar el mundo es una experiencia increÃ­ble. Muy inmersivo.', rating: 4 },
                { user: 'MarianaAventura', comment: 'Los personajes y el ritmo narrativo son de lo mejor que he jugado.', rating: 5 }
            ];
            localStorage.setItem(`reviews-${game}`, JSON.stringify(reviews));
            let total = 0;
            reviewsContainer.innerHTML = '';
            reviews.forEach(({ user, comment, rating }) => {
                total += rating;
                const div = document.createElement('div');
                div.className = 'review';
                div.innerHTML = `<p><strong>${user}:</strong> â€œ${comment}â€</p><div class="stars">${'â˜…'.repeat(rating)}${'â˜†'.repeat(5 - rating)}</div>`;
                reviewsContainer.appendChild(div);
            });
            const avg = (total / reviews.length).toFixed(1);
            const avgDisplay = document.createElement('p');
            avgDisplay.innerHTML = `<strong>Promedio:</strong> ${avg} / 5`;
            reviewsContainer.prepend(avgDisplay);
        });
    </script>

    <!-- BotÃ³n flotante para abrir el carrito en mÃ³viles -->
    <button id="abrir-carrito" class="flotante">ğŸ›’</button>

    <!-- Carrito deslizable para mÃ³viles -->
    <div id="carrito-movil" class="carrito-movil">
        <button id="cerrar-carrito">âœ–</button>
        <h2>ğŸ›’ Carrito</h2>
        <ul id="cart-items"></ul>
        <p id="total"><strong>Total:</strong> $0 COP</p>
        <a href="../carrito.html" class="ver-carrito">Ver resumen completo</a>
    </div>
</body>

</html>